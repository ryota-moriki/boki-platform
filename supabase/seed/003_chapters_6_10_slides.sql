-- 第6章～第10章のスライドデータを作成

-- 第6章: 手形取引のスライドデータ
WITH chapter6 AS (
  SELECT id FROM public.chapters WHERE title = '第6章: 手形取引'
)
INSERT INTO public.slides (chapter_id, title, content, order_index)
SELECT 
  chapter6.id,
  slide.title,
  slide.content,
  slide.order_index
FROM chapter6,
(VALUES
  ('手形とは', '## 手形とは

手形とは、一定の金額を特定の日に支払うことを約束する有価証券です。

### 手形の種類
1. **約束手形** - 振出人が受取人に支払いを約束
2. **為替手形** - 振出人が支払人に支払いを指図

手形は現金の代わりとして商取引で広く利用されています。', 1),
  
  ('約束手形の振出', '## 約束手形を振り出したとき

商品を仕入れて、代金を約束手形で支払った場合：

### 仕訳例（100,000円の商品を約束手形で仕入）
```
(借方) 仕入 100,000 | (貸方) 支払手形 100,000
```

**支払手形**は負債の勘定科目です。', 2),
  
  ('約束手形の受取', '## 約束手形を受け取ったとき

商品を販売して、代金を約束手形で受け取った場合：

### 仕訳例（80,000円の商品を約束手形で販売）
```
(借方) 受取手形 80,000 | (貸方) 売上 80,000
```

**受取手形**は資産の勘定科目です。', 3)
) AS slide(title, content, order_index);

-- 第7章: 有形固定資産のスライドデータ  
WITH chapter7 AS (
  SELECT id FROM public.chapters WHERE title = '第7章: 有形固定資産'
)
INSERT INTO public.slides (chapter_id, title, content, order_index)
SELECT 
  chapter7.id,
  slide.title,
  slide.content,
  slide.order_index
FROM chapter7,
(VALUES
  ('固定資産とは', '## 有形固定資産とは

1年以上にわたって事業で使用する目的で保有する資産です。

### 主な有形固定資産
- **建物** - 事務所、店舗、工場など
- **備品** - 机、椅子、パソコンなど
- **車両運搬具** - 営業車、トラックなど
- **土地** - 事業用の土地

これらは長期間使用するため、減価償却の対象となります。', 1),
  
  ('固定資産の取得', '## 固定資産を取得したとき

現金で備品を購入した場合：

### 仕訳例（50,000円の机を現金で購入）
```
(借方) 備品 50,000 | (貸方) 現金 50,000
```

固定資産は**資産**として記録します。', 2),
  
  ('減価償却とは', '## 減価償却とは

固定資産の取得価額を、使用期間にわたって費用として配分することです。

### 定額法の計算
```
年間減価償却費 = (取得価額 - 残存価額) ÷ 耐用年数
```

### 仕訳例（年間減価償却費10,000円）
```
(借方) 減価償却費 10,000 | (貸方) 減価償却累計額 10,000
```', 3)
) AS slide(title, content, order_index);

-- 第8章: 決算整理のスライドデータ
WITH chapter8 AS (
  SELECT id FROM public.chapters WHERE title = '第8章: 決算整理'
)
INSERT INTO public.slides (chapter_id, title, content, order_index)
SELECT 
  chapter8.id,
  slide.title,
  slide.content,
  slide.order_index
FROM chapter8,
(VALUES
  ('決算整理とは', '## 決算整理とは

決算時に、正確な財政状態と経営成績を示すために行う会計処理です。

### 主な決算整理項目
1. **貸倒引当金** - 回収不能な売掛金への備え
2. **減価償却** - 固定資産の価値減少
3. **棚卸整理** - 商品の実際残高の確認
4. **経過勘定** - 期間損益の適正化

これらにより、適正な利益計算を行います。', 1),
  
  ('貸倒引当金', '## 貸倒引当金の設定

売掛金の一部が回収不能になることに備えて設定します。

### 仕訳例（売掛金100,000円に対し2%の引当金設定）
```
(借方) 貸倒引当金繰入 2,000 | (貸方) 貸倒引当金 2,000
```

**貸倒引当金**は売掛金から控除する評価勘定です。', 2),
  
  ('棚卸整理', '## 棚卸整理

期末における商品の実際有高を確認し、帳簿残高と一致させます。

### 仕訳例（帳簿残高150,000円、実際有高140,000円）
```
(借方) 棚卸減耗費 10,000 | (貸方) 商品 10,000
```

実際有高が帳簿より少ない場合は**棚卸減耗費**で処理します。', 3)
) AS slide(title, content, order_index);

-- 第9章: 精算表のスライドデータ
WITH chapter9 AS (
  SELECT id FROM public.chapters WHERE title = '第9章: 精算表'
)
INSERT INTO public.slides (chapter_id, title, content, order_index)
SELECT 
  chapter9.id,
  slide.title,
  slide.content,
  slide.order_index
FROM chapter9,
(VALUES
  ('精算表とは', '## 精算表とは

決算整理を行い、財務諸表を作成するための補助的な表です。

### 精算表の構造
1. **試算表欄** - 決算整理前の残高
2. **修正記入欄** - 決算整理仕訳
3. **損益計算書欄** - 収益・費用の集計
4. **貸借対照表欄** - 資産・負債・純資産の集計

横の合計は必ず一致します。', 1),
  
  ('精算表の作成手順', '## 精算表の作成手順

### ステップ1: 試算表の転記
決算整理前の各勘定の残高を試算表欄に記入

### ステップ2: 修正記入
決算整理仕訳を修正記入欄に記入

### ステップ3: 損益・貸借への振分
各勘定科目を適切な欄に振り分け

### ステップ4: 当期純利益の算定
損益計算書欄で収益から費用を差し引いて計算', 2),
  
  ('精算表のチェックポイント', '## 精算表のチェックポイント

### 必須確認事項
1. **各欄の借方・貸方の合計が一致**
2. **当期純利益が損益・貸借で一致**
3. **修正記入の借方・貸方が一致**

### よくある間違い
- 勘定科目の振分先の誤り
- 決算整理仕訳の記入漏れ
- 計算ミス

精算表は財務諸表作成の基礎となる重要な資料です。', 3)
) AS slide(title, content, order_index);

-- 第10章: 財務諸表のスライドデータ
WITH chapter10 AS (
  SELECT id FROM public.chapters WHERE title = '第10章: 財務諸表'
)
INSERT INTO public.slides (chapter_id, title, content, order_index)
SELECT 
  chapter10.id,
  slide.title,
  slide.content,
  slide.order_index
FROM chapter10,
(VALUES
  ('財務諸表とは', '## 財務諸表とは

企業の財政状態と経営成績を利害関係者に報告する書類です。

### 主要な財務諸表
1. **貸借対照表（B/S）** - 財政状態を表示
2. **損益計算書（P/L）** - 経営成績を表示

これらは簿記の最終成果物として作成されます。', 1),
  
  ('貸借対照表', '## 貸借対照表（Balance Sheet）

決算日における財政状態を表示する表です。

### 構造
**資産の部 = 負債の部 + 純資産の部**

### 資産の部
- 流動資産（現金、売掛金など）
- 固定資産（建物、備品など）

### 負債の部  
- 流動負債（買掛金、短期借入金など）
- 固定負債（長期借入金など）

### 純資産の部
- 資本金、利益剰余金など', 2),
  
  ('損益計算書', '## 損益計算書（Profit & Loss）

一定期間の経営成績を表示する表です。

### 基本構造
**収益 - 費用 = 当期純利益**

### 主な項目
**売上総利益** = 売上高 - 売上原価
**営業利益** = 売上総利益 - 販売費及び一般管理費
**経常利益** = 営業利益 + 営業外収益 - 営業外費用
**当期純利益** = 経常利益 - 特別損失

当期純利益は貸借対照表の純資産に加算されます。', 3)
) AS slide(title, content, order_index);

-- 各章の公開状態を更新（全章公開にする）
UPDATE public.chapters SET is_published = true WHERE order_index >= 6;